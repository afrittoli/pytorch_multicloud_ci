\mode<presentation>

% Requirement
\RequirePackage{tikz}
\RequirePackage{textpos}
\RequirePackage{fontspec}
\RequirePackage{listingsutf8}
\RequirePackage{color}
\RequirePackage{transparent}

% Settings
\useinnertheme{af}
\useoutertheme{af}
\usecolortheme{af}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{blocks}[rounded=false, shadow=false]

\def\code#1{\texttt{#1}}

% Custom Frames
\newenvironment{blackframe}
{
  \setbeamercolor{background canvas}{bg=myfinalblue}
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setwhitelogofootline{}
  \begin{frame}[c]
}
{
  \end{frame}
  \setblacklogofootline
}

\newenvironment{grayframe}
{
  \setbeamercolor{background canvas}{bg=mylightgray}
  \setbeamercolor*{frametitle}{fg=myblack}
  \hypersetup{colorlinks,linkcolor=customdark,urlcolor=customdark}
  \settextcolour{myblack}
  \setblacklogofootline
  \begin{frame}[c]
}
{
  \end{frame}
  \setwhitelogofootline{}
}

\newenvironment{grayframewithpicshaded}[2][]
{
  \setbeamercolor{background canvas}{bg=mylightgray}
  \setbeamercolor*{frametitle}{fg=myblack}
  \hypersetup{colorlinks,linkcolor=customdark,urlcolor=customdark}
  \settextcolour{myblack}
  \setblacklogofootline
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \node[anchor=south west,inner sep=0] at (0,0) {\includegraphics[width=\paperwidth,height=\paperheight,keepaspectratio]{img/#1}};
      \fill[mylightgray,opacity=0.85] (0,0) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}
  }
  \begin{frame}[c]
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
  \setwhitelogofootline{}
}

\newenvironment{tealframe}
{
  \setbeamercolor{background canvas}{bg=myteal!30}
  \setbeamercolor*{frametitle}{fg=myblack}
  \hypersetup{colorlinks,linkcolor=customdark,urlcolor=customdark}
  \settextcolour{myblack}
  \setblacklogofootline
  \begin{frame}[c]
}
{
  \end{frame}
  \setwhitelogofootline{}
}

\newenvironment{lgrayrwhiteframe}
{
  \setbeamercolor{background canvas}{bg=mylightgray}
  \setbeamercolor*{frametitle}{fg=myblack}
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \fill[color=mylightgray, opacity=0.4] (0, 0) rectangle (0.57\paperwidth, \the\paperheight);
      \fill[color=white] (0.47\paperwidth, 0) rectangle (\the\paperwidth, \the\paperheight);
    \end{tikzpicture}
  }
  \setblacklogofootline
  \begin{frame}[c]
}
{
  \end{frame}
}

\newenvironment<>{lgrayframerpic}[4][]
{
  \setbeamercolor{background canvas}{bg=mylightgray}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{myblack}
  \setblacklogofootline
  \begin{frame}[c]
    \begin{textblock*}{0.4\paperwidth}(#4\paperwidth,0\paperheight)
      \includegraphics[height=\paperheight]{img/#1}
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(#45\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    #3
}
{
  \end{frame}
  \setwhitelogofootline{}
}

\newenvironment<>{lgrayframerpicscaled}[5][]
{
  \setbeamercolor{background canvas}{bg=mylightgray}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{myblack}
  \setblacklogofootline
  \begin{frame}[c]
    \begin{textblock*}{#5\paperwidth}(#4\paperwidth,0.15\paperheight)
      \centering
      \includegraphics[width=#5\paperwidth,height=0.7\paperheight,keepaspectratio]{img/#1}
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(#45\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    #3
}
{
  \end{frame}
  \setwhitelogofootline{}
}

\newenvironment{lblackrwhiteframe}
{
  \setbeamercolor{background canvas}{bg=myblack}
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=white] (0.55\paperwidth, 0) rectangle (\the\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}
\newenvironment{lwhiterblackframe}
{
  \setbeamercolor{background canvas}{bg=myblack}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{white}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=white] (0, 0) rectangle (0.45\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{lwhiterblackframeconfig}[1]
{
  \setbeamercolor{background canvas}{bg=myblack}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{white}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=white] (0, 0) rectangle (#1\paperwidth, \the\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{whitetoptealframe}
{
  \setbeamercolor{background canvas}{bg=white}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{myblack}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=mylightgray] (0, 0) rectangle (\the\paperwidth, 0.4\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}

\newenvironment{whitetoptealframeconfig}[1]
{
  \setbeamercolor{background canvas}{bg=white}
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{myblack}
  \setbeamertemplate{background}{
  		\begin{tikzpicture}
  			\useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
  			\fill[color=mylightgray] (0, 0) rectangle (\the\paperwidth, #1\paperheight);
  		\end{tikzpicture}
  	}
  \begin{frame}[t]
}
{
  \end{frame}
}


\newenvironment{2columnsframe}[3]
{
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{white}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \fill[color=myblack, opacity=0.8] (0.45\paperwidth, 0) rectangle (\the\paperwidth, 0.49\paperheight);
      \fill[color=tektonblue, opacity=0.8] (0, 0) rectangle (0.50\paperwidth, 0.49\paperheight);
      \fill[color=tektonlilac, opacity=0.8] (0, 0.39\paperheight) rectangle (0.50\paperwidth, 0.86\paperheight);
      \fill[color=tektonred, opacity=0.8] (0.45\paperwidth, 0.39\paperheight) rectangle (\the\paperwidth, 0.86\paperheight);
    \end{tikzpicture}
  }
  \begin{frame}[c]
    \frametitle{#1}
    \begin{columns}[T,totalwidth=\textwidth]
      \column{0.5\textwidth}
        #2
      \column{0.5\textwidth}
        #3
    \end{columns}
}
{
  \end{frame}
  \setblacklogofootline
}

\newenvironment{3squares}[4]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{myblack}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \fill[color=myblack] (0, 0.86\paperheight) rectangle (\the\paperwidth, \the\paperheight);
      \fill[color=mylightgray, opacity=0.8] (0.46\paperwidth, 0) rectangle (\the\paperwidth, 0.44\paperheight);
      \fill[color=custom3, opacity=0.8] (0, 0) rectangle (0.49\paperwidth, 0.44\paperheight);
      \fill[color=custom1, opacity=0.8] (0, 0.39\paperheight) rectangle (0.49\paperwidth, 0.86\paperheight);
      \fill[color=custom2, opacity=0.8] (0.46\paperwidth, 0.39\paperheight) rectangle (\the\paperwidth, 0.86\paperheight);
    \end{tikzpicture}
  }
  \begin{frame}[c]
    \frametitle{#1}
    \begin{columns}[T,totalwidth=\textwidth]
      \column{0.5\textwidth}
        \settextcolour{white}
        #2
        \vspace{0.05\paperheight}
        \settextcolour{white}
        #3
      \column{0.5\textwidth}
        \settextcolour{black}
        #4
        \settextcolour{white}
    \end{columns}
}
{
  \end{frame}
  \setblacklogofootline
}
\newenvironment{4squaresext}[5]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{myblack}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      % Title bar extended down to create overlap
      \fill[color=myblack] (0, 0.81\paperheight) rectangle (\the\paperwidth, \the\paperheight);
      % Darker overlay in center overlap area
      % \fill[color=myblack, opacity=0.3] (0.46\paperwidth, 0.79\paperheight) rectangle (0.49\paperwidth, 0.86\paperheight);
      % Four colored squares
      \fill[color=mylightgray, opacity=0.8] (0.46\paperwidth, 0) rectangle (\the\paperwidth, 0.44\paperheight);
      \fill[color=custom3, opacity=0.8] (0, 0) rectangle (0.49\paperwidth, 0.44\paperheight);
      \fill[color=custom1, opacity=0.8] (0, 0.39\paperheight) rectangle (0.49\paperwidth, 0.86\paperheight);
      \fill[color=custom2, opacity=0.8] (0.46\paperwidth, 0.39\paperheight) rectangle (\the\paperwidth, 0.86\paperheight);
    \end{tikzpicture}
  }
  \begin{frame}[c]
    \frametitle{#1}
    \begin{textblock*}{0.46\paperwidth}(0.03\paperwidth,0.15\paperheight)
      \settextcolour{white}
      #2
    \end{textblock*}
    \begin{textblock*}{0.46\paperwidth}(0.49\paperwidth,0.15\paperheight)
      \settextcolour{white}
      #3
    \end{textblock*}
    \begin{textblock*}{0.46\paperwidth}(0.03\paperwidth,0.57\paperheight)
      \settextcolour{white}
      #4
    \end{textblock*}
    \begin{textblock*}{0.46\paperwidth}(0.49\paperwidth,0.57\paperheight)
      \settextcolour{customdark}
      #5
    \end{textblock*}

}
{
  \end{frame}
  \setblacklogofootline
}


\newenvironment{stripedframe}[5]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
      \begin{tikzpicture}
        \useasboundingbox (0, 0) rectangle(\the\paperwidth,\the\paperheight);
        % Title bar
        \fill[color=myblack] (0, 0.86\paperheight) rectangle (\paperwidth, \paperheight);
        % Columns extending from bottom to title bar with equal usable space
        % Usable space per column: 0.2125, overlap: 0.05
        \fill[color=myblack, opacity=0.8] (0, 0) rectangle (0.2625\paperwidth, 0.86\paperheight);
        \fill[color=custom1, opacity=0.8] (0.2125\paperwidth, 0) rectangle (0.525\paperwidth, 0.86\paperheight);
        \fill[color=custom2, opacity=0.8] (0.475\paperwidth, 0) rectangle (0.7875\paperwidth, 0.86\paperheight);
        \fill[color=custom3, opacity=0.8] (0.7375\paperwidth, 0) rectangle (\the\paperwidth, 0.86\paperheight);
      \end{tikzpicture}
  	}
  \begin{frame}[t]
    \frametitle{#1}
    \normalsize
    % Position text in the usable (non-overlapping) area of each column
    \begin{textblock*}{0.2\paperwidth}(0.01\paperwidth,0.20\paperheight)
      #2
    \end{textblock*}
    \begin{textblock*}{0.2\paperwidth}(0.2725\paperwidth,0.20\paperheight)
      #3
    \end{textblock*}
    \begin{textblock*}{0.2\paperwidth}(0.535\paperwidth,0.20\paperheight)
      #4
    \end{textblock*}
    \begin{textblock*}{0.2\paperwidth}(0.7975\paperwidth,0.20\paperheight)
      #5
    \end{textblock*}
}
{
  \end{frame}
}
\newenvironment{striped3frame}[4]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
      \begin{tikzpicture}
        \useasboundingbox (0, 0) rectangle(\the\paperwidth,\the\paperheight);
        % Title bar
        \fill[color=myblack] (0, 0.86\paperheight) rectangle (\paperwidth, \paperheight);
        % Three columns extending from bottom to title bar with equal usable space
        % Usable space per column: ~0.28, overlap: 0.05
        \fill[color=myblack, opacity=0.8] (0, 0) rectangle (0.35\paperwidth, 0.86\paperheight);
        \fill[color=custom1, opacity=0.8] (0.28\paperwidth, 0) rectangle (0.68\paperwidth, 0.86\paperheight);
        \fill[color=custom2, opacity=0.8] (0.61\paperwidth, 0) rectangle (\the\paperwidth, 0.86\paperheight);
      \end{tikzpicture}
  	}
  \begin{frame}[t]
    \frametitle{#1}
    \normalsize
    % Position text in the usable (non-overlapping) area of each column
    \begin{textblock*}{0.27\paperwidth}(0.01\paperwidth,0.20\paperheight)
      #2
    \end{textblock*}
    \begin{textblock*}{0.27\paperwidth}(0.36\paperwidth,0.20\paperheight)
      #3
    \end{textblock*}
    \begin{textblock*}{0.27\paperwidth}(0.69\paperwidth,0.20\paperheight)
      #4
    \end{textblock*}
}
{
  \end{frame}
}


% top picture, 4 columns
\newenvironment{tpicstripedframe}[5]
{
  \setbeamercolor*{frametitle}{fg=myblack}
  \settextcolour{white}
  \setwhitelogofootline{}
  \setbeamertemplate{background}{
      \begin{tikzpicture}
        \useasboundingbox (0, 0) rectangle(\the\paperwidth,\the\paperheight);
        \fill[color=myblack, opacity=0.8] (0, 0) rectangle (0.25\paperwidth, 0.63\paperheight);
        \fill[color=custom1, opacity=0.8] (0.20\paperwidth, 0) rectangle (0.50\paperwidth, 0.63\paperheight);
        \fill[color=custom2, opacity=0.8] (0.45\paperwidth, 0) rectangle (0.75\paperwidth, 0.63\paperheight);
        \fill[color=custom3, opacity=0.8] (0.7\paperwidth, 0) rectangle (\the\paperwidth, 0.63\paperheight);
      \end{tikzpicture}
  	}
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm, 0.05\paperheight)
      \centering
      \includegraphics[height=0.25\paperheight]{img/#1}
    \end{textblock*}
    \vspace{0.35\paperheight}
    \normalsize
    \begin{columns}[T,totalwidth=0.98\textwidth]
      \column{0.20\textwidth}
        #2
      \column{0.20\textwidth}
        #3
      \column{0.20\textwidth}
        #4
      \column{0.20\textwidth}
        #5
    \end{columns}
}
{
  \end{frame}
}

% top black bottom white
\newenvironment{tblackbgrayframe}[1]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{myblack}
  \setbeamercolor{background canvas}{bg=white}
  \setblacklogofootline
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \fill[color=myblack] (0, 0.86\paperheight) rectangle (\the\paperwidth, \the\paperheight);
    \end{tikzpicture}
  }
  \begin{frame}[c]
    \frametitle{#1}
}
{
  \end{frame}
}

% top dark bottom picture
\newenvironment{tdarkbpicframe}[1]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setbeamercolor{background canvas}{bg=myblack}
  \setwhitelogofootline{}
  \begin{frame}[c]
    \frametitle{#1}
    \vspace{-0.15\paperheight}
}
{
  \vspace{0.05\paperheight}
  \end{frame}
  \setblacklogofootline
}

\newenvironment<>{sectionwithpic}[2][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \includegraphics[width=\paperwidth]{img/#1}
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0.32cm,0.34cm)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{section page header}
        \usebeamerfont{section name}\insertsection%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment<>{sectionwithpicrx}[2][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \includegraphics[height=\paperheight]{img/#1}
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.57\paperwidth,0cm)%
      \begin{beamercolorbox}[wd=0.4\paperwidth]{section page header}%
        \usebeamerfont{section name}%
          \begin{flushright}%
            \insertsection%
          \end{flushright}%
      \end{beamercolorbox}%
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment<>{sectionwithpiclargecentral}[3][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \transparent{#3}%
      \includegraphics[width=\paperwidth]{img/#1}
      \transparent{1}%
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0cm,0.12\paperheight)%
      \begin{beamercolorbox}[wd=\paperwidth]{section page header}%
        \usebeamerfont{largecentral}%
          \centering\insertsection%
      \end{beamercolorbox}%
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment<>{sectionwithpiclargeright}[3][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \transparent{#3}%
      \includegraphics[height=\paperheight,keepaspectratio]{img/#1}
      \transparent{1}%
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0cm,0.12\paperheight)%
      \begin{beamercolorbox}[wd=\paperwidth]{section page header}%
        \usebeamerfont{largecentral}%
          \centering\insertsection%
      \end{beamercolorbox}%
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment<>{sectionwithpiclargecentraldark}[3][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \transparent{#3}%
      \includegraphics[width=\paperwidth]{img/#1}
      \transparent{1}%
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0cm,0.12\paperheight)%
      \begin{beamercolorbox}[wd=\paperwidth]{section page header}%
        \usebeamerfont{largecentral}%
          \color{customdark}\centering\insertsection%
      \end{beamercolorbox}%
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment<>{sectionwithpicmediumcentral}[2][]
{
  \begin{frame}[t]
    \begin{textblock*}{\paperwidth}(0cm,0cm)
      \includegraphics[width=\paperwidth]{img/#1}
    \end{textblock*}
    \begin{textblock*}{0.2\paperwidth}(0.3\paperwidth,0.08\paperheight)
      \begin{center}
        \includegraphics[width=0.4\paperwidth]{img/cdevents_horizontal-white.png}
      \end{center}
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0.1\paperheight,0.45\paperheight)%
      \begin{beamercolorbox}[wd=0.9\paperwidth]{section page header}%
        \usebeamerfont{largecentral}%
          \centering\insertsection%
      \end{beamercolorbox}%
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment{lpicrblack}[4][]
{
  \setbeamercolor{background canvas}{bg=myblack}
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setbeamertemplate{background}{
    \includegraphics[height=\paperheight]{img/#1}
  }
  \setwhitelogofootline{notext}
  \begin{frame}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    \ifstrempty{#4}{
      \leftskip=0.40\paperwidth
      #3
    }{
      \begin{columns}
        \column{#4\paperwidth}
        \column{0.40\paperwidth}
        #3
      \end{columns}
    }
}
{
  \end{frame}
}

\newenvironment{textondarkpic}[2][]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setbeamertemplate{background}{
    \includegraphics[height=\paperheight]{img/#1}
  }
  \setwhitelogofootline{notext}
  \begin{frame}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment{textondarkpicshaded}[2][]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setbeamertemplate{background}{
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \node[anchor=south west,inner sep=0] at (0,0) {\includegraphics[height=\paperheight]{img/#1}};
      \fill[myblack,opacity=0.85] (0,0) rectangle (\the\paperwidth,\the\paperheight);
    \end{tikzpicture}
  }
  \setwhitelogofootline{notext}
  \begin{frame}
    \begin{textblock*}{0.4\paperwidth}(0.005\paperwidth,0.97\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{photolicense}
        \usebeamerfont{photolicense}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
}

% #1 Speaker Pic
% #2 Speaker name
% #3 Speaker name subtitle - e.g. social
% #4 Test in the middle
\newenvironment<>{speakerframe}[4][]
{
  \setbeamertemplate{background}{%
    \begin{tikzpicture}
      \useasboundingbox (0,0) rectangle(\the\paperwidth,\the\paperheight);
      \shade[top color=mydarkteal, bottom color=customdark, shading=axis, shading angle=33.02] (0,0) rectangle (\the\paperwidth, \the\paperheight);
    \end{tikzpicture}%
  }
  \setwhitelogofootline{}
  \settextcolour{white}
  \begin{frame}[t]
    \begin{textblock*}{0.45\paperwidth}(0.55\paperwidth,0cm)
      \includegraphics[width=0.45\paperwidth]{img/#1}
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0.32cm,0.34cm)
      \begin{beamercolorbox}[wd=\paperwidth]{section page header}
        \usebeamerfont{largeauthor}#2%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0.32cm,0.18\paperheight)
      \begin{beamercolorbox}[wd=\paperwidth]{section page header}
        \usebeamerfont{smallauthor}#3%
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    \begin{textblock*}{\paperwidth}(0.32cm,0.35\paperheight)
      \begin{beamercolorbox}[wd=0.7\paperwidth]{section page header}
        #4%
      \end{beamercolorbox}%
    \end{textblock*}
}
{
  \end{frame}
}

\newenvironment{whitetextontwopics}[4][]
{
  \setbeamercolor*{frametitle}{fg=white}
  \settextcolour{white}
  \setwhitelogofootline{}
  \begin{frame}[c]
    \begin{textblock*}{0.5\paperwidth}(0\paperwidth,0\paperheight)
      \includegraphics[height=\paperheight]{img/#1}
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.02\paperwidth,0.02\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{section page header}
        \usebeamerfont{section page header}#2
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
    \begin{textblock*}{0.5\paperwidth}(0.5\paperwidth,0\paperheight)
      \includegraphics[height=\paperheight]{img/#3}
    \end{textblock*}
    \begin{textblock*}{0.4\paperwidth}(0.52\paperwidth,0.02\paperheight)
      \begin{beamercolorbox}[wd=0.4\paperwidth]{section page header}
        \usebeamerfont{section page header}#4
      \end{beamercolorbox}%
      \vfill
    \end{textblock*}
}
{
  \end{frame}
  \setblacklogofootline
}

% Code listing style
\newcommand{\setlststyle}{
  \lstset{ %
    basicstyle=\ttfamily\tiny\color{myblack},
    numberstyle=\color{mygray}, % the style that is used for the line-numbers
    commentstyle=\color{mydarkteal},    % comment style
    keywordstyle=\color{mydarkblue},% keyword style
    stringstyle=\color{myblue},     % string literal style
    identifierstyle=\color{myblack},
    rulecolor=\color{myblack},      % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    % backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
    keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
    otherkeywords={*,...},           % if you want to add more keywords to the set
    numbersep=5pt,                   % how far the line-numbers are from the code
    showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particular underscores
  }
}

% Code listing style
\newcommand{\setlststyledark}{
  \lstset{ %
    basicstyle=\ttfamily\tiny,
    numberstyle=\color{mygray}, % the style that is used for the line-numbers
    commentstyle=\color{mydarkteal},    % comment style
    keywordstyle=\color{mydarkblue},% keyword style
    stringstyle=\color{mygray},     % string literal style
    identifierstyle=\color{white},
    rulecolor=\color{white},      % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
    % backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}
    breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
    breaklines=true,                 % sets automatic line breaking
    captionpos=b,                    % sets the caption-position to bottom
    extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
    keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
    otherkeywords={*,...},           % if you want to add more keywords to the set
    numbersep=5pt,                   % how far the line-numbers are from the code
    showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
    showstringspaces=false,          % underline spaces within strings only
    showtabs=false,                  % show tabs within strings adding particular underscores
  }
}

% Docker listing
% Source: https://github.com/bartimar/docker-lstlisting
\lstdefinelanguage{docker}{
  keywords={FROM, RUN, COPY, ADD, ENTRYPOINT, CMD,  ENV, ARG, WORKDIR, EXPOSE, LABEL, USER, VOLUME, STOPSIGNAL, ONBUILD, MAINTAINER},
  sensitive=false,
  comment=[l]{\#},
  morestring=[b]',
  morestring=[b]"
}

\mode<all>
